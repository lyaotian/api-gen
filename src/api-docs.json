{
  "swagger": "2.0",
  "info": {
    "version": "1.0.0",
    "title": "中消物联",
    "description": "中消物联项目API文档",
    "termsOfService": "http://swagger.io/terms/",
    "contact": {
      "name": "WGL"
    },
    "license": {
      "name": "MIT"
    }
  },
  "host": "zxwl.swagger.io",
  "basePath": "/api",
  "tags": [
    {
      "name": "User",
      "description": "用户相关"
    },
    {
      "name": "Debug",
      "description": "调试相关"
    },
    {
      "name": "Device",
      "description": "设备相关"
    },
    {
      "name": "Event",
      "description": "事件相关"
    },
    {
      "name": "Update",
      "description": "更新相关"
    }
  ],
  "schemes": [
    "http"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/UserApi/registerSms": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "获取注册验证短信",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          },
          {
            "name": "token",
            "in": "query",
            "description": "md5(tanda+phone)",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/RspModel"
            }
          }
        }
      }
    },
    "/UserApi/register": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "注册",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          },
          {
            "name": "sms_verify",
            "in": "query",
            "description": "验证码",
            "required": true,
            "type": "string"
          },
          {
            "name": "password",
            "in": "query",
            "description": "密码",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/User"
            }
          }
        }
      }
    },
    "/UserApi/login": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "登录",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          },
          {
            "name": "password",
            "in": "query",
            "description": "密码",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/User"
            }
          }
        }
      }
    },
    "/UserApi/resetAccount": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "修改账号",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          },
          {
            "name": "password",
            "in": "query",
            "description": "密码",
            "required": true,
            "type": "string"
          },
          {
            "name": "new_phone",
            "in": "query",
            "description": "新手机号",
            "required": true,
            "type": "string"
          },
          {
            "name": "new_password",
            "in": "query",
            "description": "新密码",
            "required": true,
            "type": "string"
          },
          {
            "name": "sms_verify",
            "in": "query",
            "description": "新手机验证码",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/RspModel"
            }
          }
        }
      }
    },
    "/DeviceApi/otherDevices": {
      "get": {
        "tags": [
          "Device"
        ],
        "summary": "他人的设备列表",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/Device"
            }
          }
        }
      }
    },
    "/DeviceApi/myDevices": {
      "get": {
        "tags": [
          "Device"
        ],
        "summary": "我的设备列表",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Device"
              }
            }
          }
        }
      }
    },
    "/DeviceApi/shareDevice": {
      "post": {
        "tags": [
          "Device"
        ],
        "summary": "分享设备",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          },
          {
            "name": "target_phone",
            "in": "query",
            "description": "被分享人的手机号",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/RspModel"
            }
          }
        }
      }
    },
    "/DeviceApi/listShare": {
      "get": {
        "tags": [
          "Device"
        ],
        "summary": "分享列表",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/User"
              }
            }
          }
        }
      }
    },
    "/DeviceApi/removeShare": {
      "post": {
        "tags": [
          "Device"
        ],
        "summary": "移除分享",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          },
          {
            "name": "target_phone",
            "in": "query",
            "description": "被分享人的手机号",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/RspModel"
            }
          }
        }
      }
    },
    "/DeviceApi/muteDevice": {
      "post": {
        "tags": [
          "Device"
        ],
        "summary": "消音设备",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          },
          {
            "name": "devices",
            "in": "query",
            "description": "设备名逗号分隔的字符串(如:device1,device2,device3)",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/RspModel"
            }
          }
        }
      }
    },
    "/DeviceApi/resetDevice": {
      "post": {
        "tags": [
          "Device"
        ],
        "summary": "复位设备",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          },
          {
            "name": "devices",
            "in": "query",
            "description": "设备名逗号分隔的字符串(如:device1,device2,device3)",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/RspModel"
            }
          }
        }
      }
    },
    "/DeviceApi/urgencyContact": {
      "get": {
        "tags": [
          "Device"
        ],
        "summary": "紧急联系人",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/Urgency"
            }
          }
        }
      }
    },
    "/DeviceApi/updateFireInfo": {
      "post": {
        "tags": [
          "Device"
        ],
        "summary": "更新消防电话",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          },
          {
            "name": "fire_phone",
            "in": "query",
            "description": "火警电话",
            "required": true,
            "type": "string"
          },
          {
            "name": "manager_phone",
            "in": "query",
            "description": "物业电话",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/RspModel"
            }
          }
        }
      }
    },
    "/DebugApi/listDebugAccount": {
      "get": {
        "tags": [
          "Debug"
        ],
        "summary": "调试账号列表",
        "parameters": [
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/User"
              }
            }
          }
        }
      }
    },
    "/DebugApi/login": {
      "post": {
        "tags": [
          "Debug"
        ],
        "summary": "登录调试",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/User"
            }
          }
        }
      }
    },
    "/DebugApi/listProject": {
      "get": {
        "tags": [
          "Debug"
        ],
        "summary": "工程列表",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Project"
              }
            }
          }
        }
      }
    },
    "/DebugApi/addProject": {
      "post": {
        "tags": [
          "Debug"
        ],
        "summary": "新增工程",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          },
          {
            "name": "name",
            "in": "query",
            "description": "工程名称",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/Project"
            }
          }
        }
      }
    },
    "/DebugApi/postDebug": {
      "post": {
        "tags": [
          "Debug"
        ],
        "summary": "提交调试信息",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          },
          {
            "name": "devices",
            "in": "query",
            "description": "设备名逗号分隔的字符串(如:device1,device2,device3)",
            "required": true,
            "type": "string"
          },
          {
            "name": "area",
            "in": "query",
            "description": "区域（省/市/区）",
            "required": true,
            "type": "string"
          },
          {
            "name": "detail",
            "in": "query",
            "description": "详细地址",
            "required": true,
            "type": "string"
          },
          {
            "name": "project",
            "in": "query",
            "description": "工程名称",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/RspModel"
            }
          }
        }
      }
    },
    "/DeviceApi/hostInfo": {
      "get": {
        "tags": [
          "Device"
        ],
        "summary": "获取主机信息",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/HostInfo"
            }
          }
        }
      }
    },
    "/EventApi/listEvent": {
      "get": {
        "tags": [
          "Event"
        ],
        "summary": "事件列表",
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "description": "手机号",
            "required": true,
            "type": "string"
          },
          {
            "name": "type",
            "in": "query",
            "description": "事件类型(0-报警 1-异常 2-操作)",
            "required": true,
            "type": "number",
            "format": "int32"
          },
          {
            "name": "page",
            "in": "query",
            "description": "page",
            "required": true,
            "type": "number",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Event"
              }
            }
          }
        }
      }
    }
  },
  "definitions": {
    "User": {
      "description": "用户",
      "required": [
        "phone"
      ],
      "properties": {
        "phone": {
          "type": "string",
          "description": "手机号"
        },
        "name": {
          "type": "string",
          "description": "用户名称"
        }
      }
    },
    "Device": {
      "description": "设备",
      "required": [
        "id"
      ],
      "properties": {
        "id": {
          "type": "string",
          "description": "设备id"
        },
        "user": {
          "$ref": "#/definitions/User",
          "description": "用户"
        },
        "name": {
          "type": "string",
          "description": "设备名称"
        },
        "type": {
          "type": "number",
          "format": "int32",
          "description": "设备类型"
        },
        "status": {
          "type": "number",
          "format": "int32",
          "description": "设备状态(0-正常 1-报警 2-异常  3-屏蔽)"
        },
        "connect_type": {
          "type": "number",
          "format": "int32",
          "description": "设备连接类型(0-有线 1-无线)"
        },
        "battery": {
          "type": "number",
          "format": "int32",
          "description": "电量(0-100)"
        },
        "signal": {
          "type": "number",
          "format": "int32",
          "description": "信号强度"
        },
        "address": {
          "type": "number",
          "format": "int32",
          "description": "设备的逻辑地址"
        },
        "location": {
          "type": "string",
          "description": "设备的安装位置(如: 客房)"
        },
        "is_sign": {
          "type": "number",
          "format": "int32",
          "description": "设备是否已点名(0-否 1-是)"
        }
      }
    },
    "Event" : {
      "properties" : {
        "device_id": {
          "type": "string",
          "description": "设备id"
        },
        "title": {
          "type": "string",
          "description": "事件标题"
        },
        "location": {
          "type": "string",
          "description": "设备位置"
        },
        "start_time": {
          "type": "long",
          "description": "事件发生时间"
        },
        "end_time": {
          "type": "long",
          "description": "事件结束时间"
        },
        "status": {
          "type": "long",
          "description": "状态（0-未处理，1-已处理）"
        }
      }
    },
    "HostInfo": {
      "properties": {
        "status": {
          "type": "number",
          "format": "int32",
          "description": "设备状态(0-正常 1-报警 2-异常)"
        },
        "message": {
          "type": "string",
          "description" :"设备状态信息(如:xx失联 xx低电 xx发现火警)"
        },
        "time": {
          "type": "long",
          "description": "上次产生记录的时间"
        },
        "contact": {
          "type": "string",
          "description" :"联系信息"
        },
        "alarm_count": {
          "type": "number",
          "format": "int32",
          "description": "报警数量"
        },
        "exception_count": {
          "type": "number",
          "format": "int32",
          "description": "异常数量"
        },
        "normal_count": {
          "type": "number",
          "format": "int32",
          "description": "正常数量"
        }
      }
    },
    "FireFightingInfo": {
      "properties": {
        "fire_phone": {
          "type": "string",
          "description": "火警电话"
        },
        "manager_phone": {
          "type": "string",
          "description": "物业管理电话"
        }
      }
    },
    "Address": {
      "properties": {
        "detail": {
          "type": "string",
          "description": "地址内容"
        }
      }
    },
    "Project": {
      "properties": {
        "id": {
          "type": "string",
          "description": "项目ID"
        },
        "name": {
          "type": "string",
          "description": "项目名称"
        }
      }
    },
    "Urgency": {
      "properties": {

        "contacts": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/User"
          },
          "description": "联系人对象数组"
        },
        "address": {
          "type": "string",
          "description": "设备所在地"
        },
        "fire_phone": {
          "type": "string",
          "description": "微型消防站电话"
        },
        "manager_phone": {
          "type": "string",
          "description": "物业管理电话"
        }
      }
    },
    "AppVersion": {
      "properties": {
        "url": {
          "type": "string",
          "description": "app下载地址"
        },
        "version_code": {
          "type": "number",
          "format": "int32",
          "description": "version code"
        },
        "version_name": {
          "type": "string",
          "description": "version name"
        }
      }
    },
    "RspModel": {
      "properties": {
        "code": {
          "type": "number",
          "format": "int32",
          "description": "API返回代号"
        },
        "message": {
          "type": "string",
          "description": "描述信息"
        }
      }
    }
  }
}
